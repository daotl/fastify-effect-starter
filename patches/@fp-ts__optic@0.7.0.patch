diff --git a/_mjs/index.mjs b/_mjs/index.mjs
index e2e9cb880bab2fc1ed0939046d6ff49373cba9f0..904b063d0a17c986d156019ab73fd6a776465d9b 100644
--- a/_mjs/index.mjs
+++ b/_mjs/index.mjs
@@ -4,6 +4,14 @@ import * as O from "@effect/data/Option";
 import * as RA from "@effect/data/ReadonlyArray";
 import * as RR from "@effect/data/ReadonlyRecord";
 import * as S from "@effect/data/Struct";
+const clone = (original, copy) => {
+  if (original[cloneTrait]) {
+    const originalWithClone = original;
+    return originalWithClone[cloneTrait](copy);
+  }
+  return Object.setPrototypeOf(copy, Object.getPrototypeOf(original));
+};
+export const cloneTrait = /*#__PURE__*/Symbol();
 /**
  * Compose two optics when the piece of the whole returned by the get
  * operator of the first optic is not needed by the set operator of the
@@ -21,16 +29,16 @@ const at = key => lens(s => s[key], b => s => {
     out[key] = b;
     return out;
   }
-  return {
+  return clone(s, {
     ...s,
     [key]: b
-  };
+  });
 });
-const pick = (...keys) => lens(S.pick(...keys), a => s => ({
+const pick = (...keys) => lens(S.pick(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
-const omit = (...keys) => lens(S.omit(...keys), a => s => ({
+const omit = (...keys) => lens(S.omit(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
diff --git a/_mjs/index.mjs.map b/_mjs/index.mjs.map
index 66748775f6ff83c46d7390ffa06ef7b5ec3f83ea..531d13c465d61ce6263b192e65520164226238f8 100644
--- a/_mjs/index.mjs.map
+++ b/_mjs/index.mjs.map
@@ -1 +1 @@
-{"version":3,"file":"index.mjs","names":["E","identity","pipe","O","RA","RR","S","prismComposition","that","self","Builder","getWhole","getOptic","flatMap","getPiece","orElse","GetError1","SetPiece","setOptic","match","_","SetWholeAfter","left","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","key","lens","Array","isArray","out","slice","pick","keys","omit","filter","predicate","message","prism","right","Error","nonNullable","some","index","i","optional","get","replaceOption","JSON","stringify","constructor","composition","compose","n","k","iso","encode","id","set","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","fromOption","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","modify","f"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"index.mjs","names":["E","identity","pipe","O","RA","RR","S","clone","original","copy","cloneTrait","originalWithClone","Object","setPrototypeOf","getPrototypeOf","Symbol","prismComposition","that","self","Builder","getWhole","getOptic","flatMap","getPiece","orElse","GetError1","SetPiece","setOptic","match","_","SetWholeAfter","left","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","key","lens","Array","isArray","out","slice","pick","keys","omit","filter","predicate","message","prism","right","Error","nonNullable","some","index","i","optional","get","replaceOption","JSON","stringify","constructor","composition","compose","n","k","iso","encode","id","set","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","fromOption","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","modify","f"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
diff --git a/index.d.ts b/index.d.ts
index 847108f7c84625766bcb7bd86802299d542789eb..2fc3f79f7fc4bd71f22e49d4dcaff7899a09b1fe 100644
--- a/index.d.ts
+++ b/index.d.ts
@@ -6,6 +6,10 @@ import * as O from "@effect/data/Option";
 import type { Option } from "@effect/data/Option";
 import type { Predicate, Refinement } from "@effect/data/Predicate";
 import type { ReadonlyRecord } from "@effect/data/ReadonlyRecord";
+export declare const cloneTrait: unique symbol;
+export interface Clone {
+    [cloneTrait](this: this, that: any): this;
+}
 /**
  * @since 1.0.0
  */
diff --git a/index.d.ts.map b/index.d.ts.map
index eac9da46ca4595f0bd28e2f6539e170070c89885..e8abc3f7f40c0ad5fb8d0bc63ce952e5ea1fc2e7 100644
--- a/index.d.ts.map
+++ b/index.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/index.js b/index.js
index 6ccaf35533312b87b6bc310917301f63d1481b81..6e8f9db37a41a17bcebb417a41e011a8915ff139 100644
--- a/index.js
+++ b/index.js
@@ -3,7 +3,7 @@
 Object.defineProperty(exports, "__esModule", {
   value: true
 });
-exports.traversal = exports.tail = exports.reversedPrism = exports.reversedFilter = exports.replaceOption = exports.replace = exports.prism = exports.polyTraversal = exports.polyReversedPrism = exports.polyPrism = exports.polyOptional = exports.optional = exports.modify = exports.lens = exports.iso = exports.indexes = exports.id = exports.head = exports.getOrModify = exports.getOption = exports.get = exports.findFirst = exports.encode = exports.decode = exports.cons = void 0;
+exports.traversal = exports.tail = exports.reversedPrism = exports.reversedFilter = exports.replaceOption = exports.replace = exports.prism = exports.polyTraversal = exports.polyReversedPrism = exports.polyPrism = exports.polyOptional = exports.optional = exports.modify = exports.lens = exports.iso = exports.indexes = exports.id = exports.head = exports.getOrModify = exports.getOption = exports.get = exports.findFirst = exports.encode = exports.decode = exports.cons = exports.cloneTrait = void 0;
 var E = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("@effect/data/Either"));
 var _Function = /*#__PURE__*/require("@effect/data/Function");
 var O = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("@effect/data/Option"));
@@ -12,11 +12,20 @@ var RR = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("@effect/dat
 var S = /*#__PURE__*/_interopRequireWildcard( /*#__PURE__*/require("@effect/data/Struct"));
 function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
 function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
+const clone = (original, copy) => {
+  if (original[cloneTrait]) {
+    const originalWithClone = original;
+    return originalWithClone[cloneTrait](copy);
+  }
+  return Object.setPrototypeOf(copy, Object.getPrototypeOf(original));
+};
+const cloneTrait = /*#__PURE__*/Symbol();
 /**
  * Compose two optics when the piece of the whole returned by the get
  * operator of the first optic is not needed by the set operator of the
  * second optic.
  */
+exports.cloneTrait = cloneTrait;
 const prismComposition = that => self => new Builder("prism", getWhole => (0, _Function.pipe)(self.getOptic(getWhole), E.flatMap(getPiece => (0, _Function.pipe)(that.getOptic(getPiece), E.orElse(([GetError1, SetPiece]) => (0, _Function.pipe)(self.setOptic(SetPiece)(getWhole), E.match(([_, SetWholeAfter]) => E.left([GetError1, SetWholeAfter]), SetWholeAfter => E.left([GetError1, SetWholeAfter]))))))), SetPiece1 => SetWholeBefore => (0, _Function.pipe)(that.setOptic(SetPiece1)(undefined), E.match(([SetError1, SetPiece]) => (0, _Function.pipe)(self.setOptic(SetPiece)(SetWholeBefore), E.match(([_, SetWholeAfter]) => E.left([SetError1, SetWholeAfter]), SetWholeAfter => E.left([SetError1, SetWholeAfter]))), SetPiece => self.setOptic(SetPiece)(SetWholeBefore))));
 /**
  * Compose two optics when the piece of the whole returned by the first
@@ -29,16 +38,16 @@ const at = key => lens(s => s[key], b => s => {
     out[key] = b;
     return out;
   }
-  return {
+  return clone(s, {
     ...s,
     [key]: b
-  };
+  });
 });
-const pick = (...keys) => lens(S.pick(...keys), a => s => ({
+const pick = (...keys) => lens(S.pick(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
-const omit = (...keys) => lens(S.omit(...keys), a => s => ({
+const omit = (...keys) => lens(S.omit(...keys), a => s => clone(s, {
   ...s,
   ...a
 }));
diff --git a/index.js.map b/index.js.map
index d2763cd3957df0829d63bf3503486c39d472b54a..728ac157909bada14a9d7661ee71d406848b29b1 100644
--- a/index.js.map
+++ b/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","names":["E","_interopRequireWildcard","require","_Function","O","RA","RR","S","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","prismComposition","that","self","Builder","getWhole","pipe","getOptic","flatMap","getPiece","orElse","GetError1","SetPiece","setOptic","match","_","SetWholeAfter","left","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","lens","Array","isArray","out","slice","pick","keys","omit","filter","predicate","message","prism","right","Error","identity","nonNullable","some","index","i","optional","replaceOption","JSON","stringify","constructor","composition","compose","n","k","iso","encode","exports","id","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","fromOption","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","modify","f"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"index.js","names":["E","_interopRequireWildcard","require","_Function","O","RA","RR","S","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","clone","original","copy","cloneTrait","originalWithClone","setPrototypeOf","getPrototypeOf","Symbol","exports","prismComposition","that","self","Builder","getWhole","pipe","getOptic","flatMap","getPiece","orElse","GetError1","SetPiece","setOptic","match","_","SetWholeAfter","left","SetPiece1","SetWholeBefore","undefined","SetError1","lensComposition","s","a","de","b","_ee","t","d","ee","at","lens","Array","isArray","out","slice","pick","keys","omit","filter","predicate","message","prism","right","Error","identity","nonNullable","some","index","i","optional","replaceOption","JSON","stringify","constructor","composition","compose","n","k","iso","encode","id","polyPrism","polyDecode","decode","mapLeft","e","cons","isNonEmptyReadonlyArray","head","tail","polyReversedPrism","polyReplaceEither","reversedPrism","replaceEither","reversedFilter","polyOptional","indexes","traversal","as","concat","length","findFirst","fromOption","findFirstIndex","map","polyTraversal","replace","optic","getOrThrowWith","getOption","getRight","getOrModify","GetWhole","modify","f"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"}